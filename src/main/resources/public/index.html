<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>B90 Customer Data Input</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<img src="BankLogo.jpg"  alt=width="100", height="100"/>

<h1>Welcome to bank customer data input interface</br></h1>

<a href="transactions.html">For transaction input interface, please click the link</br></a>
<a href="transactionreport.html">For transactions report, please click the link<br></a>

<h3>To create new customer, fill the fields.</br></h3>

<div style="text-align: left">
    <p>
        Enter your ID: <input id="custrId"/>
    </p>
    <p>
        Enter your name: <input id="custrName">
    </p>
    <p>
        Enter your address: <input id="custrAddress"/>
    </p>
    <p>
        Your user name is your ID, please enter your desired password: <input id="custrPassword"/>
    </p>
    <p>
    <button id="saveCustDataButton">Save customer data</button>
    </p>
    <table id="resultTableCustomer" border="1">
    </table>
    <script>
        function createNewCustomer() {
            let newCustomer ={
                custId : document.getElementById("custrId").value,
                custName : document.getElementById("custrName").value,
                custAddress : document.getElementById("custrAddress").value,
                custPwUncoded : document.getElementById("custrPassword").value}

            fetch("http://localhost:8080/bank/createCustomerB",
                {   method: "POST",
                    headers: { "Content-Type":"application/json" },
                    body: JSON.stringify(newCustomer)
                })
                .then(result => result.text())
                .then(
                    function (result) {
                        console.log(result);
                        let table = document.getElementById("resultTableCustomer");
                        let newRow = document.createElement("tr");
                        let newCell1 = document.createElement("td");
                        newCell1.innerText = result;
                        newRow.append(newCell1);
                        let newCell2 = document.createElement("td");
                        newCell2.innerText = newCustomer.custName;
                        newRow.append(newCell2);
                        table.append(newRow)
                    })
        }
        let saveCustDataButton = document.getElementById("saveCustDataButton");
        saveCustDataButton.onclick = createNewCustomer;

    </script>

</div>
</br>
</br>
</br>
<h3></br>To create new account, fill the fields.</br></h3>
<div style="text-align: left">
    <p>
        Enter your ID: <input id="accountsCustId"/>
    </p>
        <p>
            Enter account number in format "EE1234" : <input id="accountsAccountNr">
        </p>
    <p>
        Select the account type :
            <select id="accountType"> :
                <option>Deposit Account</option>
                <option>Loan Account</option>
                <option>Current Account</option>
            </select>

    </p>
        <br>
    <p>
        <button id="saveAccountsData">Save account Details</button>
    </p>
    <table id="resultTableAccount" border="1">
    </table>
    <script>
        function createNewAccount() {
            let newAccount ={
                accountCustId : document.getElementById("accountsCustId").value,
                custAccType : document.getElementById("accountType").value,
                custAccNr : document.getElementById("accountsAccountNr").value
            }
            fetch("http://localhost:8080/bank/createCustomerAccount",
                {   method: "POST",
                    headers: { "Content-Type":"application/json" },
                    body: JSON.stringify(newAccount)
                })
                .then(result => result.text())
                .then(
                    function (result) {
                        console.log(result);
                        let table = document.getElementById("resultTableAccount");
                        let newRow = document.createElement("tr");
                        let newCell1 = document.createElement("td");
                        newCell1.innerText = result;
                        newRow.append(newCell1);
                        let newCell2 = document.createElement("td");
                        newCell2.innerText = newAccount.custAccNr;
                        newRow.append(newCell2);
                        table.append(newRow)
                    })
        }
        let saveAccountsData = document.getElementById("saveAccountsData");
        saveAccountsData.onclick = createNewAccount;

    </script>

</div>
</br>
</br>
Mingi tekst Gunnarile</br>
Ja uus tekst</br>
<a href="index2.html">"Kuhu Sa l√§hed?"</a>
<h1>h1</h1>
<ul>
    <li>List 1</li>
    <li>List 2</li>
</ul>
<h3>h3</h3>
<dl>
    <dt>Term 1</dt>
    <dd>Definition of term </dd>
</dl>

<h6>h6</h6>
<ol>
    <li>List 1</li>
    <li>List 2</li>
</ol>

<h3>h6</h3>

<img src="https://static.toiimg.com/photo/72975551.cms"  alt=width="100", height="100"/>
</body>
<script>
//    alert("Mis juhtus!?!?")
</script>
</html>
